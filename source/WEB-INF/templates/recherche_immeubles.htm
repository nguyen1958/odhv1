<html>
<head>
<title>Analogon - Observatoire De l'Habitat</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript">
<!--

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_showHideLayers() { //v6.0
  var i,p,v,obj,args=MM_showHideLayers.arguments;
  for (i=0; i<(args.length-2); i+=3) if ((obj=MM_findObj(args[i]))!=null) { v=args[i+2];
    if (obj.style) { obj=obj.style; v=(v=='show')?'visible':(v=='hide')?'hidden':v; }
    obj.visibility=v; }
}

function changeStatus(){
  visFlag = "hidden";
 if(document.rechercheForm.rech_peril.options.selectedIndex > 0){
    document.rechercheForm.rech_proc[0].checked = true;
    visFlag = "visible";
 }
 document.getElementById("rbs_panel").style.visibility = visFlag;
 changeStatus2();
}

function changeStatus2(){
  if(document.rechercheForm.rech_proc[1].ckecked)
     document.getElementById("rbs_panel").style.visibility = "hidden";
  else document.getElementById("rbs_panel").style.visibility = "visible";
}



//-->
</script>

<style type="text/css">
<!--
.menu {font-family:Verdana; font-size:8pt
; color:black; text-decoration:none;}
a.menu:hover {color:red;}
//-->
</style>

</head>
<body background="images/fond02.gif" link="#FFFFFF" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onload="changeStatus()">
#parse("menu.htm")
#set($pForObject = $!req.getParameter('for_object'))
<center>
 <p>&nbsp;</p>
 <form name="rechercheForm" action="recherche" method="POST">
 <input type="hidden" name="dispatcher" value="LIST" >
 <input type="hidden" name="offset" value="0" >
  <table width="98%" border="0" cellspacing="0" cellpadding="0">
    <tr>
      <td colspan="9"><div align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;&nbsp;</font><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2"><img src="images/moteur01.gif" width="60" height="30" align="absmiddle"></font></strong></font></strong></font><strong><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;</font></strong></font><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;Recherche d'immeubles</font></strong></font><font size="2" face="Verdana, Arial, Helvetica, sans-serif">
       </font></strong></div></td>
    </tr>
    <tr>
      <td colspan="9">&nbsp;&nbsp;</td>
    </tr>
 <tr>
 <td align="center" colspan="9">
 <table width="98%" cellspacing="0" cellpadding="0" border="0">
    <tr>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="180" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Rue
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td width="170"><input name="rech_rue" value="$!recherche.rech_rue" readonly  style="width:100%;" >
      <input type="hidden" name="rech_rue_id" value="$!recherche.rech_rue_id"  >
      </td>
      <td width="60" nowrap><a href = "#" onClick ="objectWin = window.open('rue_list?chooser=recherche&new=true','object',',directories=no,location=no,status=yes,menubar=no,resize=yes,scrollbars=yes, height=500, width=700, top=0, left=0');objectWin.focus();return false;" >
        <img src="images/fleche_g_01.gif" height="18" border="0"></a>
        <a href = "#" onClick="document.rechercheForm.rech_rue.value='';document.rechercheForm.rech_rue_id.value='';return false;" >
        <img src="images/fleche_d_01.gif" height="18" border="0"></a>
      </td>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="180" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Nature d'intervention
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td colspan="2">
            <select name="rech_nat" >
            <option value="">
            #foreach($item in $!recherche.rech_natures)
               <option value="$item.odnt_id" $recherche.getSelectedAttribute($item.getOdnt_id().toString(), $!recherche.getRech_nat().toString())>$!item.odnt_nom
            #end
          </select>
       </td>
    </tr>
    <tr>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="180" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Propri&eacute;taire
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td width="170"><input name="rech_proprietaire" value="$!recherche.rech_proprietaire" readonly style="width:100%;" >
      <input type="hidden" name="rech_proprietaire_id" value="$!recherche.rech_proprietaire_id" >
      </td>
      <td width="60" nowrap><a href = "#" onClick ="objectWin = window.open('prop_list?chooser=recherche','object',',directories=no,location=no,status=yes,menubar=no,resize=yes,scrollbars=yes, height=600, width=800, top=0, left=0');objectWin.focus();return false;" >
        <img src="images/fleche_g_01.gif" height="18" border="0"></a>
        <a href = "#" onClick="document.rechercheForm.rech_proprietaire.value='';document.rechercheForm.rech_proprietaire_id.value='';return false;" >
        <img src="images/fleche_d_01.gif" height="18" border="0"></a>
      </td>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="170" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Type de proc&eacute;dure
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td colspan="2" >
            <select name="rech_peril" onChange="changeStatus()">
            <option value="">
            #foreach($item in $!recherche.rech_perils)
               <option value="$item.odnt_id" $recherche.getSelectedAttribute($item.getOdnt_id().toString(), $!recherche.getRech_peril().toString())>$!item.odnt_nom
            #end
          </select>
       </td>
    </tr>
    <tr>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="180" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Locataire
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td width="170"><input name="rech_locataire" value="$!recherche.rech_locataire" readonly style="width:100%;">
      <input type="hidden" name="rech_locataire_id" value="$recherche.rech_locataire_id" >
      </td>
      <td width="60" nowrap><a href = "#" onClick ="objectWin = window.open('loc_list?chooser=recherche','object',',directories=no,location=no,status=yes,menubar=no,resize=yes,scrollbars=yes, height=600, width=800, top=0, left=0');objectWin.focus();return false;" >
        <img src="images/fleche_g_01.gif" height="18" border="0"></a>
        <a href = "#" onClick="document.rechercheForm.rech_locataire.value='';document.rechercheForm.rech_locataire_id.value='';return false;" >
        <img src="images/fleche_d_01.gif" height="18" border="0"></a>
      </td>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td height="24" nowrap width="190" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Date&nbsp;proc&eacute;dure&nbsp;<font size="2"><i>apr&egrave;s/avant</i></font></font></strong></em></td>
      <td>&nbsp;</td>
      <td colspan="2" nowrap>
      <input name="rech_procapres" value="$!recherche.rech_procapres" size="10" >
      <input name="rech_procavant" value="$!recherche.rech_procavant" size="10" ><font size="2"><i>&nbsp;(jj/mm/aaaa)</i></font>
      </td>
    </tr>
   <tr>
      <td width="50" valign="top"> <div align="right"><img src="images/fond_sousmenu2.gif"></div></td>
      <td width="180" valign="top" background="images/fond_sousmenu.gif"><em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Cant./Sect./Parc.
        </font></strong></em></td>
      <td>&nbsp;</td>
      <td width="170" nowrap><input name="rech_canton" value="$!recherche.rech_canton" size="4" style="width:30%;">&nbsp;<input name="rech_section" value="$!recherche.rech_section"  size="4" style="width:30%;">&nbsp;<input name="rech_par1" value="$!recherche.rech_par1" size="4" style="width:30%;">
      </td>
      <td colspan="6" align="right" nowrap >
      <span id="rbs_panel0" style="visibility: visible;">
      <em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Proc&eacute;dures
        </font></strong></em>
      <input type="radio"  name="rech_proc" value="yes" $!recherche.getCheckedAttribute("yes", $!recherche.getRech_proc()) onClick="changeStatus2()" ><font color="#000080"> oui</font>
      <input type="radio"  name="rech_proc" value="no" $!recherche.getCheckedAttribute("no", $!recherche.getRech_proc()) onClick="changeStatus2()" ><font color="#000080"> non</font>
      <input type="radio"  name="rech_proc" value="" $!recherche.getCheckedAttribute("", $!recherche.getRech_proc()) onClick="changeStatus2()" ><font color="#000080"> toutes</font>
      </span>
      <span id="rbs_panel" style="visibility: hidden;">
      <em><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;Etat proc&eacute;dures
        </font></strong></em>
      <input type="radio" name="rech_proclot" value="no" $!recherche.getCheckedAttribute("no", $!recherche.getRech_proclot())  ><font color="#000080"> en cours</font>
      <input type="radio" name="rech_proclot" value="yes" $!recherche.getCheckedAttribute("yes", $!recherche.getRech_proclot())  ><font color="#000080"> cl&ocirc;turées</font>
      <input type="radio" name="rech_proclot" value="" $!recherche.getCheckedAttribute("", $!recherche.getRech_proclot())  ><font color="#000080"> toutes</font>
      </span>
      </td>
    </tr>
   </table>
   </td>
   </tr>
     <tr><td colspan="9">&nbsp;</td></tr>
    <tr><td colspan="9" align="center" >
      <a href="#" onClick="document.rechercheForm.dispatcher.value='UPDATE';document.rechercheForm.submit();"><img src="images/rechercher.gif" width="130" height="17" border="0"></a>
      <a href="#" onClick="document.rechercheForm.dispatcher.value='NEW';document.rechercheForm.submit();"><img src="images/annuler.gif" width="130" height="17" border="0"></a>
    </td></tr>
    <tr><td colspan="9">&nbsp;</td></tr>
    <tr>
    <td colspan="9" align="center">
#if($req.getSession().getAttribute("Recherche.pojo"))
      #if($pageableResults.getQueryCount() > 0 )
     <table width="100%" cellspacing="0" celpadding="0" border="0">
        <tr>
          <td width="100%"><div align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;&nbsp;</font><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2"><img src="images/moteur01.gif" width="60" height="30" align="absmiddle"></font></strong></font></strong></font><strong><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;</font></strong></font><font face="Verdana, Arial, Helvetica, sans-serif"><strong><font size="2">&nbsp;
          Résultat de votre recherche $!pageableResults.getQueryCount() réponse(s)
          </font></strong></font><font size="2" face="Verdana, Arial, Helvetica, sans-serif">
           </font></strong></div></td>
        </tr>
      </table>
      <table width="95%"  cellspacing="0" cellpadding="0" border="1" >
        <tr>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;N&deg;</font></strong></td>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Cadastre</font></strong></td>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Adresse</font></strong></td>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Lots</font></strong></td>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Procedures</font></strong></td>
          <td align="center" bgcolor="#FFFFFF"><strong><font size="2" face="Verdana, Arial, Helvetica, sans-serif">Vision globale</font></strong></td>
          </font></strong></td>
        </tr>
          <tr>
            <td colspan="6" ><div align="right"></div></td>
          </tr>
          #set($indexTo = $pageableResults.getIndexTo() + 1)
          #set($indexFrom = $pageableResults.getIndexFrom() + 1)
          #set($counter = $indexFrom)
          #foreach($item in $pageableResults.getResults())
            #set($rue = $item.odim_rue)
            <tr>
              <td align="right" height="20" width="5%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">$!counter&nbsp;&nbsp;&nbsp;</font></td>
              <td align="left" width="10%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;
                  <a href="im_form?dispatcher=FOR_UPDATE&odim_id=$!item.odim_id" style="color:blue;" >
                    $!item.odim_cadsct - $!item.odim_cadp1
                  </a>
                  </font></td>
              <td align="left" width="30%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;$!item.getAltValue($!item.odim_num,'') $!item.getAltValue($!rue.odrue_type,'') $!item.getAltValue($!rue.odrue_liaison,'') $!item.getAltValue($!rue.odrue_nom,'')
              </font></td>
              <td align="left" width="10%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;
                <a href="lot_list?for_object=immeuble&odlot_immeuble=$!item.odim_id" style="color:blue;" #if($!item.odim_lots.size()>1) title="Plusieurs lots" #end >
                  #if($!item.odim_lots.size() > 0)
                    Oui
                    #if($!item.odim_lots.size() > 1)
      			          <b>&nbsp;<span title="Plusieurs lots" style="color: red;" ><font size="4" face="Courrier">+</font></span></b>
      			        #else
      			        &nbsp;<span title="Un lot" style="color: red;" ><font size="4" face="Courrier">o</font></span>
                    #end
                  #else
                    Non
                  #end
                </a>
              </font></td>
              <td align="left" width="10%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">&nbsp;
                <a href="proced_list?odim_id=$!item.odim_id" style="color:blue;" #if($!item.odim_procedures.size()>1) title="Plusieurs proc&eacute;dures" #end >
                  #if($!item.odim_procedures.size() > 0)
                    Oui
                    #if($!item.odim_procedures.size() > 1)
      			          <b>&nbsp;<span title="Plusieurs proc&eacute;dures" style="color: red;" ><font size="4" face="Courrier" >+</font></span></b>
      			        #else
      			          &nbsp;<span title="Une proc&eacute;dure" style="color: red;" ><font font size="4" face="Courrier" >o</font></span>
                    #end
                  #else
                    Non
                  #end
                </a>
              </font></td>
              <td align="center" width="10%"  background="images/fond_liste.gif"><font size="2" face="Verdana, Arial, Helvetica, sans-serif">
                  <a href="im_form?dispatcher=SHOW&for_object=immeuble&odim_id=$!item.odim_id" style="color:blue;" >
                    voir
                  </a>
              </font></td>
            </tr>
            #set($counter = $counter + 1)
          #end
      </table>
      <br><br>
                <table width="90%" cellspacing="3" cellpadding="0" border="0"><tr >
                <td width="50" valign="top"> <div align="right"></div></td>
                <td width="50%" nowrap>
                 &nbsp;
                </td>
                #set($pagesList = $pageableResults.getHandlers(5))
                   <td valign="top">
                    <a href="#" onClick="document.rechercheForm.offset.value='FIRST';document.rechercheForm.submit();"><img src="images/fleche_g_02.gif" border="0" ></a>
                   </td>
                #if($pageableResults.getCurrentPage() > 0)
                  <td valign="top">
                   <a href="#" onClick="document.rechercheForm.offset.value=-1;document.rechercheForm.submit();"><img src="images/fleche_g_01.gif" border="0"></a>
                  </td>
                #end
                #foreach($page in $pagesList)
                  #set($shownPage = $page + 1)
                  #set($offsetValue = $page - $pageableResults.getCurrentPage())
                  #if($offsetValue == 0)
                      <td valign="top">
                      <input name="req_page" size=2 value="$!shownPage">
                      </td>
                      <td>
                        <a href="#" onClick="document.rechercheForm.submit();"><img src="images/bouton_ok.gif" border="0" ></a>
                      </td>
                  #else
                    <td>
                    <a href="#" onClick="document.rechercheForm.offset.value=$offsetValue;document.rechercheForm.submit();" style="color:blue;"> $shownPage</a>
                    </td>
                  #end
                #end
                #if($pageableResults.getCurrentPage() < $pageableResults.getPagesCount() - 1)
                <td>
                <a href="#" onClick="document.rechercheForm.offset.value=1;document.rechercheForm.submit();" ><img src="images/fleche_d_01.gif" border="0" ></a>
                </td>
                #end
                   <td>
                    <a href="#" onClick="document.rechercheForm.offset.value='LAST';document.rechercheForm.submit();"><img src="images/fleche_d_02.gif" border="0" ></a>
                   </td>
                   <td width="50%" align="right" nowrap>
                    #set($crtPage = $pageableResults.getCurrentPage() + 1)
                     Page  $crtPage / $pageableResults.getPagesCount()
                   </td>
                </tr></table>
       #else
       <br><br>
        <font color="#800000"><b>
        <center>
          #if($pageableResults.getQueryCount() == 0 )
            Aucune réponse pour ces critères.
          #end
        </center>
        </b></font>
       #end
#end
 </td>
 <td>&nbsp;</td>
 </tr>
 </table>
</form>
</center>
<p>&nbsp;</p>
<!--
$recherche.getListCommand() <br>
#foreach($it in $recherche.getObjects())
 $!it <br>
#end
-->
<!--
$pageableResults.getListCommand() <br>
#foreach($it in $pageableResults.getParamValues())
 $!it <br>
#end
-->
<!--
$hibernateError
-->
</center>
</body>
</html>

